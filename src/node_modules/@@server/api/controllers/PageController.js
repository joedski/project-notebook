module.exports = ({ controllers, models }) => ({
  async getPages({
    offset = 0,
    limit = 0,
  } = {}) {
    return models.$withTransaction(trx => {
      return models.Page.getPages(trx, { offset, limit })
    })
    // TODO: Better error messaging?
    // .catch(error => {
    //   console.error(error)
    //   throw new Error('Error retrieving pages')
    // })
  },

  async createPage(pageProps) {
    return models.$withTransaction(async (trx) => {
      const pageId = await models.Page.createPage(trx, pageProps)
      return models.Page.getPageById(trx, pageId)
    })
    // TODO: Better error messaging?
    // .catch(error => {
    //   console.error(error)
    //   throw new Error('Error creating page')
    // })
  },

  updatePage(pageId, pageProps) {
    return models.$withTransaction((trx) => {
      return models.Page.updatePage(trx, pageId, pageProps)
    })
    // TODO: Better error messaging?
    // .catch(error => {
    //   console.error(error)
    //   throw new Error('Error creating page')
    // })
  },
})
