const { knex } = require('@@server/api/utils/knex')

module.exports = ({ models }) => ({
  getEntityById(trx, entityId) {
    return trx
    .from('entity')
    .select()
    .then(res => res.map(entity => entity.id)[0])
  },

  /**
   * Creates a new Entity.  Entities have no data by themselves.
   * @param  {KnexTransaction} trx Current Transaction.
   * @return {Promise<number>}     Id of the new Entity.
   */
  createEntity(trx) {
    return trx
    .returning('id')
    .insert({})
    .into('entity')
    .then(res => res[0])
  },
})
